$(function() {
    $("#loginForm").validate({
        rules: {
            userPhone: {
                required: !0
            },
            userPwd: {
                required: !0
            }
        },
        messages: {
            userPhone: {
                required: "请输入登录手机号"
            },
            userPwd: {
                required: "请输入密码"
            }
        },
        submitHandler: function(a) {
            var b, c, d, e;
            $("#remember").prop("checked") ? $("#remember").val(1) : $("#remember").val(null),
                b = $("#email").val(),
                c = $("#password").val(),
                d = $("#remember").val(),
                $(a).find(":submit").attr("disabled", !0),
                $.ajax({
                    type: "POST",
                    data: {
                        userPhone: b,
                        userPwd: c
                    },
                    url: "/login/login"
                }).done(function(result) {
                    if (result.state == 10) {
                        if(result.hasOwnProperty("company")){
                            if (result.company == true)
                                window.location.href = "/toLogin/index"
                            else{
                                alert("您还未完善公司信息，请先完善公司信息")
                                window.location.href = "/company/toMyCompany"
                                return
                            }
                        }
                        window.location.href = "/toCompany/toIndex";
                    } else {
                        $('#beError').text(result.msg).show();
                    }
                })
        }
    }),
        $("body").on("click", "a.btn_s",
            function() {
                $.colorbox.close(),
                    parent.jQuery.colorbox.close()
            }),
        $(".inline").colorbox({
            inline: !0
        }),
        $(".errorTips").click(function() {
            errorTips("上传附件格式错误!")
        }),
        $("#resend").click(function() {
            var a = $("#userid").val(),
                b = $("#resend_type").val();
            $.ajax({
                type: "POST",
                data: {
                    code: a,
                    type: b
                },
                url: ctx + "/user/resendActivatedMail"
            }).done(function(a) {
                a.success ? $.colorbox({
                    inline: !0,
                    href: "#resend_success",
                    title: "验证邮件发送成功"
                }) : alert(a.msg)
            })
        })
});